# Curso de Web Scraping: Extracci贸n de Datos en la Web

# **Modulo IV - APIS**
- [Clase 20 Introducci贸n a APIs](#20-introducci贸n-a-apis)



# 20. **Introducci贸n a APIs** 

<img src="./img/m4c0-1.png"/>

En este m贸dulo utilizaremos APIs para obtener informaci贸n sobre artistas, discos y tracks disponibles en Spotify.

驴Qu茅 es una **API**?

Por sus siglas en ingl茅s, una API es una interfaz para programar aplicaciones (*Application Programming Interface*).
Es decir que es un conjunto de funciones, m茅todos, reglas y definiciones que nos permitir谩n desarrollar aplicaciones (en este caso un scraper) que se comuniquen con los servidores de Spotify. Las APIs son dise帽adas y desarrolladas por las empresas que tienen inter茅s en que se desarrollen aplicaciones (p煤blicas o privadas) que utilicen sus servicios. Spotify tiene APIs p煤blicas y bien documentadas que estaremos usando en el desarrollo de este proyecto.

### REST
Un t茅rmino que seguramente te vas a encontrar cuando est茅s buscando informaci贸n en internet es **REST** o *RESTful*. Significa *representational state transfer* y si una API es REST o RESTful, implica que respeta unos determinados principios de arquitectura, como por ejemplo un protocolo de comunicaci贸n cliente/servidor (que ser谩 HTTP) y (entre otras cosas) un conjunto de operaciones definidas que conocemos como **m茅todos**. Ya ven铆amos usando el m茅todo GET para hacer solicitudes a servidores web.

### Documentaci贸n
Como mencion茅 antes, las APIs son dise帽adas por las mismas empresas que tienen inter茅s en que se desarrollen aplicaciones (p煤blicas o privadas) que consuman sus servicios o informaci贸n. Es por eso que la forma de utilizar las APIs variar谩 dependiendo del servicio que queramos consumir. No es lo mismo utilizar las APIs de Spotify que las APIs de Twitter. Por esta raz贸n es de suma importancia leer la documentaci贸n disponible, generalmente en la secci贸n de desarrolladores de cada sitio. Te dejo el [link a la de Spotify](https://developer.spotify.com/documentation/)

### JSON
Json significa *JavaScript Object Notation* y es un formato para describir objetos que gan贸 tanta popularidad en su uso que ahora se lo considera independiente del lenguaje. De hecho, lo utilizaremos en este proyecto por m谩s que estemos trabajando en Python, porque es la forma en la que obtendremos las respuestas a las solicitudes que realicemos utilizando las APIs. Para nosotros, no ser谩 ni m谩s ni menos que un diccionario con algunas particularidades que iremos viendo a lo 
largo del curso.

Hay muy buenas APIs gratuitas en la web para practicar Machine Learning, aqu铆 hay una lista: [https://todobi.com/las-mejores-apis-para-machine-learning/](https://todobi.com/las-mejores-apis-para-machine-learning/)

# 21. **Utilizando APIs: Construir una URL** 

> #### [M4C1 Construir una URL](M4C1-construir-url.ipynb) puedes mirar este archivo como gu铆a de esta secci贸n.

Links 煤tiles para la clase:
- Documentaci贸n de Spotify - Web API Reference - Artistas

[Web API Reference | Spotify for Developers](https://developer.spotify.com/documentation/web-api/reference/#/operations/get-an-artist)

- Coldplay en Spotify, aqui podemos ver el id del artista.

[Coldplay](https://open.spotify.com/artist/4gzpq5DPGxSnKTe4SA8HAU)

## Empecemos!

```python
#Importamos la libreria que utilizaremos para consumir y hacer peticiones
import requests
```

```python
#URL base para peticiones GET de la api de SPOTIFY
url_base='https://api.spotify.com/v1'
```

```python
#guardamos el id de la pagina del artista de spotify en este ejemplo el id de coldplay
id_artist='4gzpq5DPGxSnKTe4SA8HAU'
```

```python
#ruta de ENDPOINT para artistas (ver documentacion API)
ep_artist='/artists/{id}'
```

```python
#unificamos nuestra URL final
url_base+ep_artist.format(id=id_artist)
```

```python
#creamos nuestra peticion con la libreria requests
# y pasamos como parametro la URL que construimos de la api de SPOTIFY
r=requests.get(url_base+ep_artist.format(id=id_artist))
```

'https://api.spotify.com/v1/artists/4gzpq5DPGxSnKTe4SA8HAU'

```python
#vemos el estado que nos desvuelve la peticion
r.status_code
```

401

```python
# status code = 401 ; significa que no estamos autorizados a acceder al ENDPOINT
#utilizamos este metodo para visualizar lo que devuelve el JSON de nuestro peticion
r.json()
```

{'error': {'status': 401, 'message': 'No token provided'}}

>  Por el momento es todo, continuaremos en la siguiente secci贸n.
